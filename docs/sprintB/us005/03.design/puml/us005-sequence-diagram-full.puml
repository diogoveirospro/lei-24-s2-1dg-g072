@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Human Resources\n Manager" as HRM
participant ":GenerateTeamProposalUI" as UI
participant ":GenerateTeamProposalController" as CTRL
participant Repositories
participant "repositories:Repositories" as REP
participant "skillRepository" as SKILLREP
participant "collaboratorRepository" as COLREP
participant "teamProposalRepository" as TEAMPROREP
participant "teamProposal:\nTeamProposal" as teamProposal
participant "teamRepository" as TEAMREP
participant "team:\nTeam" as team

activate HRM

    HRM -> UI : asks to create a new team
    activate UI

        UI --> HRM : request the maximum and minimum team size
    deactivate UI

    HRM -> UI : types requested size
    activate UI

        UI -> CTRL** : generate


        UI -> CTRL : listSkills()
        activate CTRL

           CTRL -> Repositories: getInstance()
           activate Repositories

                Repositories --> CTRL: repositories
           deactivate Repositories

           CTRL -> REP: getSkillRepository()
           activate REP

                REP --> CTRL: skillRepository
           deactivate REP

            CTRL -> SKILLREP : listSkills()
            activate SKILLREP

                SKILLREP --> CTRL : skills
            deactivate SKILLREP

            CTRL --> UI : skills
        deactivate CTRL

    loop
        UI --> HRM: shows the list of skills and asks you to \nselect one that you need for that task
    deactivate UI

    HRM -> UI: select the skill
    activate UI

    end

        UI --> HRM: shows all data and requests confirmation
    deactivate UI

    HRM -> UI: confirms data
    activate UI

        UI -> CTRL: chooseMembers(skills)
        activate CTRL

            CTRL -> Repositories: getInstance()
            activate Repositories

                Repositories --> CTRL: repositories
            deactivate Repositories

            CTRL -> REP: getCollaboratorRepository()
            activate REP

                REP --> CTRL: collaboratorRepository
            deactivate REP

            CTRL -> COLREP: chooseMembers(skills)
            activate COLREP

                COLREP --> CTRL: members
            deactivate COLREP

            CTRL --> UI: members
        deactivate CTRL

        UI -> CTRL: generateTeamProposal(size, members)
        activate CTRL

            CTRL -> Repositories: getInstance()
            activate Repositories

                Repositories --> CTRL: repositories
            deactivate Repositories

            CTRL -> REP: getTeamProposalRepository()
            activate REP

                REP --> CTRL: teamProposalRepository
            deactivate REP

            CTRL -> TEAMPROREP: generateTeamProposal(size, members)
            activate TEAMPROREP

                TEAMPROREP -> teamProposal**: generateTeamProposal(size, members)

                    TEAMPROREP -> TEAMPROREP : addTeamProposal(teamProposal)
                    activate TEAMPROREP

                    TEAMPROREP -> TEAMPROREP : validateTeamProposal(teamProposal)
                    activate TEAMPROREP

                TEAMPROREP --> CTRL: teamProposal

                deactivate TEAMPROREP

                deactivate TEAMPROREP

                
            deactivate TEAMPROREP

            CTRL --> UI: teamProposal
        deactivate CTRL

        UI --> HRM: show the team recommendation
    deactivate UI

    HRM -> UI: accepts team recommendation
    activate UI

        UI -> CTRL: createTeam(teamProposal)
        activate CTRL

            CTRL -> Repositories: getInstance()
            activate Repositories

                Repositories --> CTRL: repositories
            deactivate Repositories

            CTRL -> REP: getTeamRepository()
            activate REP

                REP --> CTRL: teamRepository
            deactivate REP

            CTRL -> TEAMREP: createTeam(teamProposal)
            activate TEAMREP

                TEAMREP -> team**: create(teamProposal)

                    TEAMREP -> TEAMREP: addTeam(team)
                    activate TEAMREP

                    TEAMREP -> TEAMREP: validateTeam(team)
                    activate TEAMREP

                TEAMREP --> CTRL: team
            deactivate TEAMREP

                    deactivate TEAMREP

                    deactivate TEAMREP

            CTRL --> UI: team
        deactivate CTRL

        UI --> HRM: displays operation success
    deactivate UI

deactivate HRM

@enduml