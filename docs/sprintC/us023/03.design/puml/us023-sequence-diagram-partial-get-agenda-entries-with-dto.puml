@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

participant ":AssignTeamController" as CTRL
participant "repositories\n:Repositories" as REP
participant "agenda\n:Agenda" as AGENDA
participant ":AgendaMapper" as AGENDAMAPPER
participant "agendaEntry\n:AgendaEntry" as AGENDAENTRY
participant "listEntries\n:List<AgendaEntry>" as LISTENTRIES
participant "agendaEntriesDto\n:List<AgendaEntryDto>" as AGENDAENTRIESDTO
participant "agendaEntryDto\n:AgendaEntryDto" as AGENDAENTRYDTO

autonumber 3
-> CTRL: getAgendaEntries()

autonumber 3.1
activate CTRL
    group Get Agenda entries with DTO

        CTRL -> REP**: getInstance()
        activate REP

            REP --> CTRL: repositories
        deactivate REP

        CTRL -> REP: getAgenda()
        activate REP

            REP --> CTRL: agenda
        deactivate REP

        CTRL -> AGENDA** : getAgendaEntries()
        activate AGENDA

            AGENDA --> LISTENTRIES** : create()
            activate LISTENTRIES

                loop for each agendaEntry
                AGENDA -> AGENDAENTRY** : b = validateAgendaEntryToAssignTeam()

                    opt b == true
                    AGENDA -> LISTENTRIES : add(agendaEntry)
                    activate LISTENTRIES
                    deactivate LISTENTRIES
                    end

                end

                LISTENTRIES --> AGENDA : listEntries
            deactivate LISTENTRIES

            AGENDA --> CTRL : listEntries
            deactivate AGENDA

                CTRL -> AGENDAMAPPER** : agendaEntriesToDto(listEntries)
                activate AGENDAMAPPER

                    AGENDAMAPPER --> AGENDAENTRIESDTO** : create()

                    loop for each agendaEntry
                        AGENDAMAPPER -> LISTENTRIES : get(i)
                        activate LISTENTRIES

                            LISTENTRIES --> AGENDAMAPPER : agendaEntry
                        deactivate LISTENTRIES

                        AGENDAMAPPER -> AGENDAMAPPER : agendaEntryDto = toDTO(agendaEntry)
                        activate AGENDAMAPPER
                        deactivate AGENDAMAPPER

                        AGENDAMAPPER --> AGENDAENTRYDTO** : create()
                        activate AGENDAENTRYDTO

                            AGENDAENTRYDTO --> AGENDAMAPPER : agendaEntryDto
                        deactivate AGENDAENTRYDTO

                        AGENDAMAPPER -> AGENDAENTRIESDTO : add(agendaEntryDto)
                        activate AGENDAENTRIESDTO
                        deactivate AGENDAENTRIESDTO

                    end

                    AGENDAMAPPER --> CTRL : agendaEntriesDto
                deactivate AGENDAMAPPER

    end

    autonumber 4
    <-- CTRL : agendaEntriesDto
deactivate CTRL


@enduml